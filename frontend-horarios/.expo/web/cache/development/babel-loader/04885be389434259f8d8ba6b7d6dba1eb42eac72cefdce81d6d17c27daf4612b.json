{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useNavigation } from '@react-navigation/native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteHorario } from \"../../redux/modules/horario/actions.js\";\nimport { deleteAll } from \"../../redux/modules/actividades/actions.js\";\nimport { checkTokenValidity } from \"../../helpers/validator/checkToken.js\";\nimport { createdFalse } from \"../../redux/modules/horario/actions.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default EliminarJornada = function EliminarJornada() {\n  var dispatch = useDispatch();\n  var horario = useSelector(function (state) {\n    var _state$horarios;\n    return (_state$horarios = state.horarios) == null ? void 0 : _state$horarios.horario;\n  });\n  var navigation = useNavigation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    success = _useState4[0],\n    setSuccess = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    retrievedToken = _useState6[0],\n    setRetrievedToken = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    idHorario = _useState8[0],\n    setIdHoraio = _useState8[1];\n  useEffect(function () {\n    var verifyToken = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var verifiedtoken = yield checkTokenValidity();\n          if (verifiedtoken.decodedToken) {\n            console.log('token bueno');\n            setRetrievedToken(verifiedtoken.decodedToken);\n          } else {\n            console.log('token malo');\n            navigation.navigate('Home');\n          }\n        } catch (err) {\n          console.log(\"Error en token :\" + err);\n        }\n      });\n      return function verifyToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    verifyToken();\n  }, []);\n  useEffect(function () {\n    if (horario) {\n      setIdHoraio(horario.id_horario);\n    }\n  }, [horario]);\n  var handlePress = function handlePress(option) {\n    if (!option) {\n      navigation.navigate('VerHorario');\n    } else {\n      console.log('antes del dispatch');\n      var deleteHorarioDispatch = dispatch(deleteHorario(idHorario));\n      var deleteAllDispatch = dispatch(deleteAll(idHorario));\n      Promise.all([deleteHorarioDispatch, deleteAllDispatch]).then(function () {\n        setSuccess(true);\n        dispatch(createdFalse());\n      }).catch(function (err) {\n        return setSuccess(true);\n      });\n    }\n  };\n  useEffect(function () {\n    if (success) navigation.navigate('Home');\n  }, [success, dispatch, navigation]);\n  var handleBackPress = useCallback(function () {\n    return true;\n  }, []);\n  useEffect(function () {\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return function () {\n      backHandler.remove();\n    };\n  }, [handleBackPress]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.text,\n      children: \" Desea eliminar la Jornada?\"\n    }), _jsx(Text, {\n      style: styles.text,\n      children: \" Este cambio es irreversible\"\n    }), _jsxs(View, {\n      style: styles.buttonContainer,\n      children: [_jsx(Button, {\n        title: \"Eliminar Actividad\",\n        onPress: function onPress() {\n          return handlePress(true);\n        }\n      }), _jsx(View, {\n        styles: styles.space\n      }), _jsx(Button, {\n        style: styles.button,\n        title: \"Volver\",\n        onPress: function onPress() {\n          return handlePress(false);\n        }\n      })]\n    }), _jsxs(Text, {\n      children: [\" \", error ? 'Hubo un error al eliminar la actividad' : '', \" \"]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40\n  },\n  buttonContainer: {\n    flexDirection: 'row'\n  },\n  space: {\n    width: 20\n  }\n});","map":{"version":3,"names":["React","useCallback","useEffect","useState","View","Text","BackHandler","StyleSheet","Button","useNavigation","useDispatch","useSelector","deleteHorario","deleteAll","checkTokenValidity","createdFalse","jsx","_jsx","jsxs","_jsxs","EliminarJornada","dispatch","horario","state","_state$horarios","horarios","navigation","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","success","setSuccess","_useState5","_useState6","retrievedToken","setRetrievedToken","_useState7","_useState8","idHorario","setIdHoraio","verifyToken","_ref","_asyncToGenerator","verifiedtoken","decodedToken","console","log","navigate","err","apply","arguments","id_horario","handlePress","option","deleteHorarioDispatch","deleteAllDispatch","Promise","all","then","catch","handleBackPress","backHandler","addEventListener","remove","style","styles","container","children","text","buttonContainer","title","onPress","space","button","create","flex","justifyContent","alignItems","textAlign","marginBottom","flexDirection","width"],"sources":["/home/ddonda/horarios-inacap/screens/horarioScreens/EliminarJornada.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { View, Text, BackHandler, StyleSheet, Button } from 'react-native'\nimport { useNavigation } from '@react-navigation/native'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { deleteHorario } from '../../redux/modules/horario/actions.js'\nimport { deleteAll } from '../../redux/modules/actividades/actions.js'\nimport { checkTokenValidity } from '../../helpers/validator/checkToken.js' \nimport { createdFalse } from '../../redux/modules/horario/actions.js'\n\nexport default EliminarJornada = () => {\n  \n  const dispatch = useDispatch()\n\n  const horario = useSelector(state => state.horarios?.horario)\n  \n  const navigation = useNavigation()\n\n  const [error, setError] = useState(false)\n  const [success, setSuccess] = useState(false)\n  const [retrievedToken, setRetrievedToken] = useState(null)\n  const [idHorario, setIdHoraio] = useState(0)\n  \n  useEffect(() => {\n    const verifyToken = async () => {\n      try{\n        const verifiedtoken = await checkTokenValidity()\n        if(verifiedtoken.decodedToken){\n          console.log('token bueno')\n          //console.log(verifiedtoken.decodedToken)\n          setRetrievedToken(verifiedtoken.decodedToken)\n        }else{\n          console.log('token malo')\n          navigation.navigate('Home')\n        }\n      }catch(err){\n        console.log(`Error en token :${err}`)\n      }\n    }\n    verifyToken()\n  },[])\n\n  useEffect(() => {\n    if(horario){\n      setIdHoraio(horario.id_horario)\n    }\n  },[horario])\n  \n  let handlePress = option => {\n    //console.log('en deleteHorario')\n    //console.log(dataHorario)\n    if(!option){\n      navigation.navigate('VerHorario')\n    }else{\n      console.log('antes del dispatch')\n      const deleteHorarioDispatch = dispatch(deleteHorario(idHorario))\n      const deleteAllDispatch = dispatch(deleteAll(idHorario))\n      Promise.all([deleteHorarioDispatch, deleteAllDispatch])\n        .then(() =>{\n          setSuccess(true)\n          dispatch(createdFalse())\n        })\n        .catch(err => setSuccess(true))\n    }\n  }\n  \n  useEffect(() =>{\n    if(success) navigation.navigate('Home')\n  },[success, dispatch, navigation])\n\n  const handleBackPress = useCallback(() => {\n    return true\n  },[])\n\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress)\n    \n    return () => {\n      backHandler.remove()\n    }\n  }, [handleBackPress])\n\n\n  return (\n    <View style = { styles.container }>\n      <Text style = { styles.text }> Desea eliminar la Jornada?</Text>\n      <Text style = { styles.text }> Este cambio es irreversible</Text>\n      <View style = { styles.buttonContainer }>\n        <Button \n          title = 'Eliminar Actividad' \n          onPress = { () => handlePress(true) }\n        />  \n        <View styles = { styles.space }/>\n        <Button \n          style = { styles.button }\n          title = 'Volver' \n          onPress = { () => handlePress(false) }\n        />\n      </View>\n      <Text> { error ? 'Hubo un error al eliminar la actividad' : '' } </Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n  },\n  space: {\n    width: 20,\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}