{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { useNavigation } from '@react-navigation/native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkTokenValidity } from \"../../helpers/validator/checkToken.js\";\nimport { getAlumno } from \"../../redux/modules/alumno/actions.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default AlumnoDashboard = function AlumnoDashboard() {\n  var dispatch = useDispatch();\n  var alumno = useSelector(function (state) {\n    var _state$alumno;\n    return (_state$alumno = state.alumno) == null ? void 0 : _state$alumno.alumno;\n  });\n  var navigation = useNavigation();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    nombreAlumno = _useState2[0],\n    setNombreAlumno = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    retrievedToken = _useState4[0],\n    setRetrievedToken = _useState4[1];\n  useEffect(function () {\n    var verifyToken = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var verifiedtoken = yield checkTokenValidity();\n          if (verifiedtoken.decodedToken) {\n            setRetrievedToken(verifiedtoken.decodedToken);\n          } else {\n            navigation.navigate('Home');\n          }\n        } catch (err) {\n          console.log(\"Error en token :\" + err);\n        }\n      });\n      return function verifyToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    verifyToken();\n  }, []);\n  useEffect(function () {\n    if (retrievedToken) {\n      dispatch(getAlumno(retrievedToken.idAlumno)).catch(function (err) {\n        return console.log('error en dispatch de alumno: ', err);\n      });\n    }\n  }, [retrievedToken]);\n  useEffect(function () {\n    if (alumno && alumno.nombre_alumno) {\n      setNombreAlumno(alumno.nombre_alumno);\n    }\n  }, [alumno]);\n  var handlePress = function handlePress(option) {\n    if (!option) {\n      navigation.navigate('Home');\n    } else {\n      navigation.navigate('BuscarProfesor');\n    }\n  };\n  var handleBackPress = useCallback(function () {\n    return true;\n  }, []);\n  useEffect(function () {\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return function () {\n      backHandler.remove();\n    };\n  }, [handleBackPress]);\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.header,\n      children: _jsx(View, {\n        style: styles.square\n      })\n    }), _jsxs(View, {\n      style: styles.content,\n      children: [_jsxs(Text, {\n        style: styles.text,\n        children: [\" BIENVENIDO \", nombreAlumno.toUpperCase()]\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return handlePress(true);\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \" BUSCAR PROFESOR \"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return handlePress(true);\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \" CERRAR SESION \"\n        })\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    backgroundColor: '#323232',\n    paddingTop: 29\n  },\n  header: {\n    height: 134.333,\n    backgroundColor: '#ED6A5A',\n    width: '100%'\n  },\n  square: {\n    width: 72,\n    height: 72,\n    backgroundColor: '#ED6A5A',\n    position: 'absolute',\n    top: 67.167,\n    left: '50%',\n    marginLeft: -36,\n    transform: [{\n      rotate: '45deg'\n    }]\n  },\n  content: {\n    flex: 1,\n    paddingTop: 17.667,\n    justifyContent: 'center'\n  },\n  text: {\n    textAlign: 'center',\n    color: '#EAF4D3',\n    fontWeight: 'bold',\n    marginBottom: 17.667\n  },\n  button: {\n    backgroundColor: '#EAF4D3',\n    justifyContent: 'center',\n    marginHorizontal: 37,\n    marginBottom: 17.667,\n    alignItems: 'center',\n    width: 286,\n    height: 48\n  },\n  buttonText: {\n    color: '#323232',\n    fontSize: 16,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useCallback","useEffect","useState","View","Text","BackHandler","StyleSheet","Button","TouchableOpacity","SafeAreaView","useNavigation","useDispatch","useSelector","checkTokenValidity","getAlumno","jsx","_jsx","jsxs","_jsxs","AlumnoDashboard","dispatch","alumno","state","_state$alumno","navigation","_useState","_useState2","_slicedToArray","nombreAlumno","setNombreAlumno","_useState3","_useState4","retrievedToken","setRetrievedToken","verifyToken","_ref","_asyncToGenerator","verifiedtoken","decodedToken","navigate","err","console","log","apply","arguments","idAlumno","catch","nombre_alumno","handlePress","option","handleBackPress","backHandler","addEventListener","remove","style","styles","container","children","header","square","content","text","toUpperCase","button","onPress","buttonText","create","flex","justifyContent","alignItems","backgroundColor","paddingTop","height","width","position","top","left","marginLeft","transform","rotate","textAlign","color","fontWeight","marginBottom","marginHorizontal","fontSize"],"sources":["/home/ddonda/horarios-inacap/screens/alumnoScreens/AlumnoDashboard.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { View, Text, BackHandler, StyleSheet, Button, TouchableOpacity, SafeAreaView } from 'react-native'\nimport { useNavigation } from '@react-navigation/native'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { checkTokenValidity } from '../../helpers/validator/checkToken.js' \nimport { getAlumno } from '../../redux/modules/alumno/actions.js'\n\nexport default AlumnoDashboard = () => {\n\n  const dispatch = useDispatch()\n\n  const alumno = useSelector(state => state.alumno?.alumno)\n  \n  const navigation = useNavigation()\n  \n  const [nombreAlumno, setNombreAlumno] = useState('')\n  const [retrievedToken, setRetrievedToken] = useState(null)\n  \n  useEffect(() => {\n    const verifyToken = async () => {\n      try{\n        const verifiedtoken = await checkTokenValidity()\n        if(verifiedtoken.decodedToken){\n          //console.log('token bueno')\n          //console.log(verifiedtoken.decodedToken)\n          setRetrievedToken(verifiedtoken.decodedToken)\n        }else{\n          //console.log('token malo')\n          navigation.navigate('Home')\n        }\n      }catch(err){\n        console.log(`Error en token :${err}`)\n      }\n    }\n    verifyToken()\n  },[])\n\n  useEffect(() => {\n    if(retrievedToken){\n      //console.log('id profesor', retrievedToken.idAlumno)\n      dispatch(getAlumno(retrievedToken.idAlumno))\n        .catch(err => console.log('error en dispatch de alumno: ', err))\n    }\n  },[retrievedToken])\n\n  useEffect(() => {\n    if(alumno && alumno.nombre_alumno){\n      //console.log('profesor: ', profesor)\n      setNombreAlumno(alumno.nombre_alumno)\n    }\n  },[alumno])\n\n\n  let handlePress = option => {\n    if(!option){\n      navigation.navigate('Home')\n    }else{\n      navigation.navigate('BuscarProfesor')\n    }\n  }\n\n  const handleBackPress = useCallback(() => {\n    return true\n  },[])\n\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress)\n    \n    return () => {\n      backHandler.remove()\n    }\n  }, [handleBackPress])\n\n  return (\n    <SafeAreaView style = { styles.container }>\n      <View style = { styles.header }>\n        <View style = {styles.square} />\n      </View>\n      <View style = { styles.content }>\n        <Text style = { styles.text }> BIENVENIDO {nombreAlumno.toUpperCase()}</Text>\n          <TouchableOpacity\n            style = { styles.button }\n            onPress = { () => handlePress(true) }\n          >\n            <Text style = { styles.buttonText } > BUSCAR PROFESOR </Text>\n          </TouchableOpacity> \n          <TouchableOpacity\n            style = { styles.button }\n            onPress = { () => handlePress(true) }\n          >\n            <Text style = { styles.buttonText } > CERRAR SESION </Text>\n          </TouchableOpacity> \n      </View>\n    </SafeAreaView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    backgroundColor: '#323232',\n    paddingTop: 29\n  },\n  header: {\n    height: 134.333,\n    backgroundColor: '#ED6A5A',\n    width: '100%',\n  },\n  square: {\n    width: 72,\n    height: 72,\n    backgroundColor: '#ED6A5A',\n    position: 'absolute',\n    top: 67.167,\n    left: '50%',\n    marginLeft: -36,\n    transform: [{ rotate: '45deg' }],\n  },\n   content: {\n    flex: 1,\n    paddingTop: 17.667,\n    justifyContent: 'center',\n  },\n  text: {\n    textAlign: 'center',\n    color: '#EAF4D3',\n    fontWeight: 'bold',\n    marginBottom: 17.667,\n  },\n  button: {\n    backgroundColor: '#EAF4D3',\n    justifyContent: 'center',\n    marginHorizontal: 37,\n    marginBottom: 17.667,\n    alignItems: 'center',\n    width: 286,\n    height: 48,\n  },\n  buttonText: {\n    color: '#323232',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}