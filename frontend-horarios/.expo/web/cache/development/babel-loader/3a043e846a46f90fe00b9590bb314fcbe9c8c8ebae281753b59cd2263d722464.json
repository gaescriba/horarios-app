{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkTokenValidity } from \"../../helpers/validator/checkToken.js\";\nimport { deleteItem } from \"../../redux/modules/actividades/actions.js\";\nimport { deletedFalse } from \"../../redux/modules/actividades/actions.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default EliminarActividad = function EliminarActividad() {\n  var _route$params;\n  var dispatch = useDispatch();\n  var isItemDeleted = useSelector(function (state) {\n    var _state$actividades;\n    return (_state$actividades = state.actividades) == null ? void 0 : _state$actividades.itemDeleted;\n  });\n  var isItemDeletedRef = useRef(false);\n  var route = useRoute();\n  var id_actividad = (_route$params = route.params) == null ? void 0 : _route$params.id_actividad;\n  var navigation = useNavigation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    retrievedToken = _useState4[0],\n    setRetrievedToken = _useState4[1];\n  useEffect(function () {\n    var verifyToken = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var verifiedtoken = yield checkTokenValidity();\n          if (verifiedtoken.decodedToken) {\n            console.log('token bueno');\n            setRetrievedToken(verifiedtoken.decodedToken);\n          } else {\n            console.log('token malo');\n            navigation.navigate('Home');\n          }\n        } catch (err) {\n          console.log(\"Error en token :\" + err);\n        }\n      });\n      return function verifyToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    verifyToken();\n  }, []);\n  useEffect(function () {\n    if (isItemDeleted) {\n      dispatch(deletedFalse());\n      isItemDeletedRef.current = true;\n    }\n  }, [isItemDeleted]);\n  useEffect(function () {\n    if (isItemDeletedRef.current) {\n      navigation.navigate('VerHorario');\n    }\n  }, [isItemDeletedRef.current]);\n  var handlePress = function handlePress(option) {\n    if (!option) {\n      navigation.navigate('VerHorario');\n    } else {\n      dispatch(deleteItem(id_actividad)).catch(function () {\n        return setError(true);\n      });\n    }\n  };\n  var handleBackPress = useCallback(function () {\n    return true;\n  }, []);\n  useEffect(function () {\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return function () {\n      backHandler.remove();\n    };\n  }, [handleBackPress]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.header,\n      children: _jsx(View, {\n        style: styles.square\n      })\n    }), _jsxs(View, {\n      style: styles.content,\n      children: [_jsx(Text, {\n        style: styles.text,\n        children: \" Desea eliminar la actividad?\"\n      }), _jsx(Text, {\n        style: styles.text,\n        children: \" ESTE CAMBIO ES IRREVERSIBLE \"\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return handlePress(true);\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \" ELIMINAR \"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return handlePress(false);\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \" VOLVER \"\n        })\n      }), _jsxs(Text, {\n        style: styles.text,\n        children: [\" \", error ? 'Hubo un error al eliminar la actividad' : '', \" \"]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    backgroundColor: '#323232'\n  },\n  header: {\n    height: 134.333,\n    backgroundColor: '#ED6A5A',\n    width: '100%'\n  },\n  square: {\n    width: 72,\n    height: 72,\n    backgroundColor: '#ED6A5A',\n    position: 'absolute',\n    top: 67.167,\n    left: '50%',\n    marginLeft: -36,\n    transform: [{\n      rotate: '45deg'\n    }]\n  },\n  content: {\n    flex: 1,\n    paddingTop: 17.667,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40,\n    color: '#EAF4D3',\n    fontWeight: 'bold'\n  },\n  buttonContainer: {\n    flexDirection: 'row'\n  },\n  button: {\n    backgroundColor: '#EAF4D3',\n    justifyContent: 'center',\n    marginHorizontal: 37,\n    marginBottom: 17.667,\n    alignItems: 'center',\n    width: 286,\n    height: 48\n  },\n  buttonText: {\n    color: '#323232',\n    fontSize: 16,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","View","Text","BackHandler","StyleSheet","Button","TouchableOpacity","useNavigation","useRoute","useDispatch","useSelector","checkTokenValidity","deleteItem","deletedFalse","jsx","_jsx","jsxs","_jsxs","EliminarActividad","_route$params","dispatch","isItemDeleted","state","_state$actividades","actividades","itemDeleted","isItemDeletedRef","route","id_actividad","params","navigation","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","retrievedToken","setRetrievedToken","verifyToken","_ref","_asyncToGenerator","verifiedtoken","decodedToken","console","log","navigate","err","apply","arguments","current","handlePress","option","catch","handleBackPress","backHandler","addEventListener","remove","style","styles","container","children","header","square","content","text","button","onPress","buttonText","create","flex","justifyContent","alignItems","backgroundColor","height","width","position","top","left","marginLeft","transform","rotate","paddingTop","textAlign","marginBottom","color","fontWeight","buttonContainer","flexDirection","marginHorizontal","fontSize"],"sources":["/home/ddonda/horarios-inacap/screens/actividadesScreens/EliminarActividad.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { View, Text, BackHandler, StyleSheet, Button, TouchableOpacity } from 'react-native'\nimport { useNavigation, useRoute } from '@react-navigation/native'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { checkTokenValidity } from '../../helpers/validator/checkToken.js' \nimport { deleteItem } from '../../redux/modules/actividades/actions.js'\nimport { deletedFalse } from '../../redux/modules/actividades/actions.js'\n\nexport default EliminarActividad = () => {\n\n  const dispatch = useDispatch()\n  \n  const isItemDeleted = useSelector(state => state.actividades?.itemDeleted)\n  \n  const isItemDeletedRef = useRef(false) \n  \n  const route = useRoute()\n\n  const id_actividad = route.params?.id_actividad\n\n  const navigation = useNavigation()\n\n  const [error, setError] = useState(false)\n  const [retrievedToken, setRetrievedToken] = useState(null)\n  \n  useEffect(() => {\n    const verifyToken = async () => {\n      try{\n        const verifiedtoken = await checkTokenValidity()\n        if(verifiedtoken.decodedToken){\n          console.log('token bueno')\n          //console.log(verifiedtoken.decodedToken)\n          setRetrievedToken(verifiedtoken.decodedToken)\n        }else{\n          console.log('token malo')\n          navigation.navigate('Home')\n        }\n      }catch(err){\n        console.log(`Error en token :${err}`)\n      }\n    }\n    verifyToken()\n  },[])\n\n  useEffect(() => {\n    if(isItemDeleted){\n      dispatch(deletedFalse())\n      isItemDeletedRef.current = true\n    }\n  },[isItemDeleted])\n\n  useEffect(() => {\n    if(isItemDeletedRef.current){\n      navigation.navigate('VerHorario')\n    }\n  },[isItemDeletedRef.current])\n  \n  let handlePress = option => {\n    if(!option){\n      navigation.navigate('VerHorario')\n    }else{\n      //console.log(id_actividad)\n      dispatch(deleteItem(id_actividad))\n        .catch(() => setError(true))\n    }\n  }\n\n  const handleBackPress = useCallback(() => {\n    return true\n  },[])\n\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress)\n    \n    return () => {\n      backHandler.remove()\n    }\n  }, [handleBackPress])\n  \n  return (\n    <View style = { styles.container }  >\n      <View style = { styles.header }>\n        <View style = { styles.square } />\n      </View>\n      <View style = { styles.content } >\n        <Text style = { styles.text }> Desea eliminar la actividad?</Text>\n        <Text style = { styles.text }> ESTE CAMBIO ES IRREVERSIBLE </Text>\n          <TouchableOpacity\n            style = { styles.button }\n            onPress = { () => handlePress(true) }\n          >\n            <Text style = { styles.buttonText } > ELIMINAR </Text>\n          </TouchableOpacity> \n          <TouchableOpacity\n            style = { styles.button }\n            onPress = { () => handlePress(false) }\n          >\n            <Text style = { styles.buttonText } > VOLVER </Text>\n          </TouchableOpacity> \n        <Text style = { styles.text }> { error ? 'Hubo un error al eliminar la actividad' : '' } </Text>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    backgroundColor: '#323232',\n  },\n  header: {\n    height: 134.333,\n    backgroundColor: '#ED6A5A',\n    width: '100%',\n  },\n  square: {\n    width: 72,\n    height: 72,\n    backgroundColor: '#ED6A5A',\n    position: 'absolute',\n    top: 67.167,\n    left: '50%',\n    marginLeft: -36,\n    transform: [{ rotate: '45deg' }],\n  },\n  content: {\n    flex: 1,\n    paddingTop: 17.667,\n    justifyContent: 'center',\n    alignItems: 'center',\n   },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40,\n    color: '#EAF4D3',\n    fontWeight: 'bold'\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n  },\n  button: {\n    backgroundColor: '#EAF4D3',\n    justifyContent: 'center',\n    marginHorizontal: 37,\n    marginBottom: 17.667,\n    alignItems: 'center',\n    width: 286,\n    height: 48,\n  },\n  buttonText: {\n    color: '#323232',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}