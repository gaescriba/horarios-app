{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkTokenValidity } from \"../../helpers/validator/checkToken.js\";\nimport { accept } from \"../../redux/modules/reuniones/actions.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default AceptarReunion = function AceptarReunion() {\n  var _route$params;\n  var dispatch = useDispatch();\n  var route = useRoute();\n  var id_reunion = (_route$params = route.params) == null ? void 0 : _route$params.id_reunion;\n  var reunionAccepted = useSelector(function (state) {\n    var _state$reuniones;\n    return (_state$reuniones = state.reuniones) == null ? void 0 : _state$reuniones.reunionAccepted;\n  });\n  var navigation = useNavigation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    retrievedToken = _useState4[0],\n    setRetrievedToken = _useState4[1];\n  useEffect(function () {\n    var verifyToken = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var verifiedtoken = yield checkTokenValidity();\n          if (verifiedtoken.decodedToken) {\n            setRetrievedToken(verifiedtoken.decodedToken);\n          } else {\n            navigation.navigate('Home');\n          }\n        } catch (err) {\n          console.log(\"Error en token :\" + err);\n        }\n      });\n      return function verifyToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    verifyToken();\n  }, []);\n  var handlePress = function handlePress(option) {\n    if (!option) {\n      navigation.navigate('VerHorario');\n    } else {\n      console.log('antes del dispatch', id_reunion);\n      dispatch(accept(id_reunion)).catch(function (err) {\n        console.log(err);\n        if (!error) {\n          setError(true);\n        }\n      });\n    }\n  };\n  useEffect(function () {\n    if (reunionAccepted) {\n      navigation.navigate('VerHorario');\n    }\n  }, [reunionAccepted]);\n  var handleBackPress = useCallback(function () {\n    return true;\n  }, []);\n  useEffect(function () {\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    return function () {\n      backHandler.remove();\n    };\n  }, [handleBackPress]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.text,\n      children: \" Desea aceptar la reunion?\"\n    }), _jsx(Text, {\n      style: styles.text,\n      children: \" Este cambio es irreversible\"\n    }), _jsxs(View, {\n      style: styles.buttonContainer,\n      children: [_jsx(Button, {\n        title: \"Aceptar reunion\",\n        onPress: function onPress() {\n          return handlePress(true);\n        }\n      }), _jsx(View, {\n        styles: styles.space\n      }), _jsx(Button, {\n        style: styles.button,\n        title: \"Volver\",\n        onPress: function onPress() {\n          return handlePress(false);\n        }\n      })]\n    }), _jsxs(Text, {\n      children: [\" \", error ? 'Hubo un error al eliminar la actividad' : '', \" \"]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40\n  },\n  buttonContainer: {\n    flexDirection: 'row'\n  },\n  space: {\n    width: 20\n  }\n});","map":{"version":3,"names":["React","useCallback","useEffect","useState","View","Text","BackHandler","StyleSheet","Button","useNavigation","useRoute","useDispatch","useSelector","checkTokenValidity","accept","jsx","_jsx","jsxs","_jsxs","AceptarReunion","_route$params","dispatch","route","id_reunion","params","reunionAccepted","state","_state$reuniones","reuniones","navigation","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","retrievedToken","setRetrievedToken","verifyToken","_ref","_asyncToGenerator","verifiedtoken","decodedToken","navigate","err","console","log","apply","arguments","handlePress","option","catch","handleBackPress","backHandler","addEventListener","remove","style","styles","container","children","text","buttonContainer","title","onPress","space","button","create","flex","justifyContent","alignItems","textAlign","marginBottom","flexDirection","width"],"sources":["/home/ddonda/horarios-inacap/screens/reunionesScreens/AceptarReunion.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { View, Text, BackHandler, StyleSheet, Button } from 'react-native'\nimport { useNavigation, useRoute } from '@react-navigation/native'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { checkTokenValidity } from '../../helpers/validator/checkToken.js' \nimport { accept } from '../../redux/modules/reuniones/actions.js'\n\nexport default AceptarReunion = () => {\n\n  const dispatch = useDispatch()\n  \n  const route = useRoute()\n\n  const id_reunion = route.params?.id_reunion\n\n  const reunionAccepted = useSelector(state => state.reuniones?.reunionAccepted)\n  \n  const navigation = useNavigation()\n\n  const [error, setError] = useState(false)\n  const [retrievedToken, setRetrievedToken] = useState(null)\n\n  useEffect(() => {\n    const verifyToken = async () => {\n      try{\n        const verifiedtoken = await checkTokenValidity()\n        if(verifiedtoken.decodedToken){\n          //console.log('token bueno')\n          //console.log(verifiedtoken.decodedToken)\n          setRetrievedToken(verifiedtoken.decodedToken)\n        }else{\n          //console.log('token malo')\n          navigation.navigate('Home')\n        }\n      }catch(err){\n        console.log(`Error en token :${err}`)\n      }\n    }\n    verifyToken()\n  },[])\n\n  let handlePress = option => {\n    if(!option){\n      navigation.navigate('VerHorario')\n    }else{\n      console.log('antes del dispatch', id_reunion)\n      dispatch(accept(id_reunion))\n        .catch(err => {\n          console.log(err)\n          if(!error){\n            setError(true)\n          }\n        })\n    }\n  }\n\n  useEffect(() => {\n    if(reunionAccepted){\n      navigation.navigate('VerHorario')\n    }\n  },[reunionAccepted])\n\n  const handleBackPress = useCallback(() => {\n    return true\n  },[])\n\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackPress)\n    \n    return () => {\n      backHandler.remove()\n    }\n  }, [handleBackPress])\n\n  return (\n    <View style = { styles.container }>\n      <Text style = { styles.text }> Desea aceptar la reunion?</Text>\n      <Text style = { styles.text }> Este cambio es irreversible</Text>\n      <View style = { styles.buttonContainer }>\n        <Button \n          title = 'Aceptar reunion' \n          onPress = { () => handlePress(true) }\n        />  \n        <View styles = { styles.space }/>\n        <Button \n          style = { styles.button }\n          title = 'Volver' \n          onPress = { () => handlePress(false) }\n        />\n      </View>\n      <Text> { error ? 'Hubo un error al eliminar la actividad' : '' } </Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  text: {\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n  },\n  space: {\n    width: 20,\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}