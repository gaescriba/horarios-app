{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { decode } from \"./decoder.js\";\nimport * as SecureStore from 'expo-secure-store';\nexport var checkTokenValidity = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var result = {\n      isExpired: false,\n      decodedToken: {}\n    };\n    try {\n      var retrievedToken = yield SecureStore.getItemAsync('token');\n      if (!retrievedToken) {\n        return result;\n      }\n      var decodedToken = decode(retrievedToken);\n      var isTokenExpired = Date.now() >= decodedToken.exp * 1000;\n      if (isTokenExpired) {\n        result.isExpired = true;\n      } else {\n        result.decodedToken = decodedToken;\n      }\n    } catch (err) {\n      throw err;\n    }\n    return result;\n  });\n  return function checkTokenValidity() {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["decode","SecureStore","checkTokenValidity","_ref","_asyncToGenerator","result","isExpired","decodedToken","retrievedToken","getItemAsync","isTokenExpired","Date","now","exp","err","apply","arguments"],"sources":["/home/ddonda/horarios-inacap/helpers/validator/checkToken.js"],"sourcesContent":["import { decode } from './decoder.js'\nimport * as SecureStore from 'expo-secure-store'\n\nexport const checkTokenValidity = async () => {\n\n  let result = {\n    isExpired: false,\n    decodedToken: {}\n  }\n\n  try{\n    const retrievedToken = await SecureStore.getItemAsync('token')\n\n    if(!retrievedToken){\n      return result\n    }\n\n    const decodedToken = decode(retrievedToken)\n    const isTokenExpired = Date.now() >= decodedToken.exp * 1000\n\n    if(isTokenExpired){\n      result.isExpired = true\n    }else{\n      result.decodedToken = decodedToken\n    }\n  }catch(err){\n    throw err\n  }\n  \n  return result\n}\n\n"],"mappings":";AAAA,SAASA,MAAM;AACf,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAEhD,OAAO,IAAMC,kBAAkB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;IAE5C,IAAIC,MAAM,GAAG;MACXC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAE,CAAC;IACjB,CAAC;IAED,IAAG;MACD,IAAMC,cAAc,SAASP,WAAW,CAACQ,YAAY,CAAC,OAAO,CAAC;MAE9D,IAAG,CAACD,cAAc,EAAC;QACjB,OAAOH,MAAM;MACf;MAEA,IAAME,YAAY,GAAGP,MAAM,CAACQ,cAAc,CAAC;MAC3C,IAAME,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIL,YAAY,CAACM,GAAG,GAAG,IAAI;MAE5D,IAAGH,cAAc,EAAC;QAChBL,MAAM,CAACC,SAAS,GAAG,IAAI;MACzB,CAAC,MAAI;QACHD,MAAM,CAACE,YAAY,GAAGA,YAAY;MACpC;IACF,CAAC,QAAMO,GAAG,EAAC;MACT,MAAMA,GAAG;IACX;IAEA,OAAOT,MAAM;EACf,CAAC;EAAA,gBA3BYH,kBAAkBA,CAAA;IAAA,OAAAC,IAAA,CAAAY,KAAA,OAAAC,SAAA;EAAA;AAAA,GA2B9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}